# Validator

Use inner Validator to create a validator.

```js
import { Meta, Validator } from 'tyshemo'

class Required extends Validator {
  static determine = function() {}
  static validate = function() {}
  static message = '{label} is required'
}

class Name extends Meta {
  static label = 'Name'
  static validators = [Required]
}
```

## Options

```js
const SomeValidator = new Validator({
  determine: (value) => Boolean, // whether to run this validator, return true to run, false to forbid
  validate: (value) => Boolean, // required, return true to pass, false to not pass
  message: '', // the message which throw when validate not pass, can be function to return message dynamicly
  break: true, // whether to stop the validation if this validator did not pass, the left validators will be dropped
  async: false, // is this validator a async validator, if true, only works when invoke model.validateAsync
})
```

## Instance

An instance of Validator is able to be used in Meta.

```js
const required = new Required(replacement) // use replacement to relace static definitions

class Name extends Meta {
  static validators = [required]
}
```

## Builtin Validators Generators

To use some common validators, we provide some builtin validator generators to generate validator quickly.

```js
import { Validator } from 'tyshemo'

const {
  /**
   * these validators depend on attributes
   */
  required,
  maxLen,
  minLen,
  max,
  min,

  integer,
  decimal,
  email,
  url,
  date, // date like string 2022-12-11
  match,

  allOf,
  anyOf,
} = Validator

class Url extends Meta {
  static validators = [
    required('Url is required.'),
    url('The pass text should be a url.'),
  ]
}
```

Each of these static methods is a validator generator which will generator a Validator instance.

Notice: `break` of validators generated by these generators are set to be `true` as default.

### required(message)

Generate a `required` validator. It depends on `required` and `empty` attributes, for example:

```js
const SomeMeta = crateMeta({
  label: 'Book',
  default: {
    id: '',
  },
  required: true,
  empty: ({ id }) => !id.length,
  validators: [
    Validator.required('{label} is required.'),
  ],
})
```

Here we give `required` and `empty` attributes, they controll the `required` validator.

## maxLen(message, len?)

Generate a validator to check the length of a string whose length should not gather than the given `len`.
It depends on `maxLen` attribute, for exampe:

```js
const SomeMeta = createMeta({
  label: 'Name',
  default: '',
  maxLen: 60,
  validators: [
    Validator.maxLen('Name length should less than {maxLen}.'),
  ],
})
```

## minLen(message, len?)

Generate a validator to check the length of a string whose length should not less than the given `len`.
It depends on `minLen` attribute, for exampe:

```js
const SomeMeta = createMeta({
  label: 'Name',
  default: '',
  minLen: 3,
  validators: [
    Validator.minLen('Name length should more than {maxLen}.'),
  ],
})
```

### max(message, num?)

Generate a `max` validator, the passed number should less than given `num`. It depends on `max` attribute, for example:

```js
const SomeMeta = createMeta({
  label: 'Age',
  default: 10,
  max: 100,
  validators: [
    Validator.max('Age should not gather than {max}.'),
  ],
})
```

### min(message, num?)

Generate a `min` validator, the passed number should more than given `num`. It depends on `min` attribute, for example:

```js
const SomeMeta = createMeta({
  label: 'Age',
  default: 10,
  min: 10,
  validators: [
    Validator.min('Age should not less than {min}.'),
  ],
})
```

### integer(len, message)

Generate a `integer` validator which should receive a number whose integer part should less than given length.

```js
[
  integer(4, 'Length of integer part should equal or be less than 4.'), // 0-9999 -> true
]
```

### decimal(len, message)

Generate a `decimal` validator which should receive a number whose decimal part should less then given length.

```js
[
  decimal(2, 'Length of decimal part should equal or be less then 2.') // 0.00-0.99 -> true
]
```

### email(message)

Should be a string which is an email address.

### url(message)

Should be a url string.

### date(message)

Should be a date string whose formatter is `YYYY-MM-DD`.

```js
[
  date('Some should must be a date.')
]
```

### match(function|regexp|String|Number|Boolean|NaN|...)

```js
[
  match(/[0-9]+/, 'Some should must be a number'),
  match(v => v > 10, 'Some should be greater than 10'),
  match(String, 'Some should be a string'),
  match(NaN, 'Some should not be a number'),
  match(Promise, 'Some should be a promise'),
  match('aaa', 'Some should equal `aaa`'),
]
```

### allOf(checkers, message)

Should match all validators

```js
allOf([
  v => typeof v === 'number',
  v => v > 10,
], 'Some should must be a number which should greater than 10')
```

### anyOf(checkers, message)

Should match one of the given validators.

```js
anyOf([
  v => typeof v === 'number',
  v => typeof v === 'string' && !isNaN(+v),
], 'Some should be a number or a string number')
```
